---
all:
  hosts:
    192.168.0.111:
      ansible_user: kavin
      ansible_ssh_private_key_file: ~/.ssh/id_ed25519

k3s_cluster:
  children:
    server:
      hosts:
        192.168.0.111:
    agent:
      hosts:
        192.168.0.110:

  vars:
    ansible_port: 22
    ansible_user: kavin
    ansible_ssh_private_key_file: ~/.ssh/id_ed25519
    k3s_version: v1.33.5+k3s1
    token: "<SECRET_TOKEN_FROM_DL"
    api_endpoint: "{{ hostvars[groups['server'][0]]['ansible_host'] | default(groups['server'][0]) }}"
    cluster_context: k3s-user
    extra_server_args: "--disable=servicelb --disable=traefik --kube-apiserver-arg default-not-ready-toleration-seconds=30 --kube-apiserver-arg default-unreachable-toleration-seconds=30 --kube-controller-arg node-monitor-period=20s --kube-controller-arg node-monitor-grace-period=20s --kubelet-arg node-status-update-frequency=15s"
    extra_agent_args: ""
    server_config_yaml: |
      node-label:
        - "k8s.imkavin.dev/nodepool=control-plane"
    agent_config_yaml: |
      node-label:
        - "k8s.imkavin.dev/nodepool=workers"
        - "node.kubernetes.io/worker=worker"